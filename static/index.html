<!DOCTYPE html>
<html>

<head>
    <title>Executus Client</title>
    <script src="/static/executus-client.js" type="module"></script>
</head>

<body>
    <button id="loadMusic">Load Music</button>
    <ul id="musicList"></ul>

    <script type="module">
        import { getMusicList, getSongURL } from '/static/executus-client.js';

        document.getElementById('loadMusic').addEventListener('click', async () => {
            const musicList = await getMusicList();
            const musicListElement = document.getElementById('musicList');

            musicListElement.innerHTML = '';
            musicList.forEach(music => {
                const li = document.createElement('li');
                const audioControl = document.createElement('audio');
                li.textContent = music;
                musicListElement.appendChild(li);
                li.appendChild(audioControl);
                audioControl.controls = true;
                audioControl.autoplay = false;
                audioControl.src = getSongURL(music);
            });
        });
    </script>
</body>

</html>